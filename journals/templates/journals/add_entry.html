{% extends 'base.html' %}
{% block title %}Add Entry{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto py-10 text-white font-mono">
    <h1 class="text-3xl font-bold mb-6">Add Entry to {{ journal.title }}</h1>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <div>
            <label for="content" class="block text-sm font-semibold mb-1">Content (Markdown)</label>
            <textarea name="content" id="content" class="border border-gray-600 bg-gray-800 text-white p-3 w-full rounded" rows="10"></textarea>
            <div id="preview" class="markdown-preview bg-gray-900 border border-gray-700 p-4 mt-4 rounded text-white"></div>
        </div>

        <div class="flex items-end justify-between">
            <button type="submit" class="bg-blue-600 hover:bg-blue-500 text-white px-5 py-2 rounded shadow">ðŸ’¾ Save</button>
            <div class="text-right">
                <label for="media" class="block text-sm font-semibold mb-1 text-white">Upload Media</label>
                <input type="file" name="media" id="media" class="bg-gray-800 text-white border border-gray-600 rounded p-2">
            </div>
        </div>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
    document.getElementById('content').addEventListener('input', function () {
        const markdownText = this.value;
        const preview = document.getElementById('preview');
        preview.innerHTML = marked.parse(markdownText);
    });
</script>

<style>
.markdown-preview h1 {
    font-size: 1.875rem;
    font-weight: bold;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}
.markdown-preview h2 {
    font-size: 1.5rem;
    font-weight: bold;
    margin-top: 1rem;
    margin-bottom: 0.5rem;
}
.markdown-preview p {
    margin-bottom: 0.75rem;
}
.markdown-preview ul {
    list-style-type: disc;
    padding-left: 1.5rem;
    margin-bottom: 0.75rem;
}
.markdown-preview li {
    margin-bottom: 0.25rem;
}
.markdown-preview a {
    color: #60a5fa;
    text-decoration: underline;
}
.markdown-preview blockquote {
    border-left: 4px solid #4b5563;
    padding-left: 1rem;
    color: #9ca3af;
    font-style: italic;
    margin-bottom: 1rem;
}
.markdown-preview code {
    background-color: #1f2937;
    padding: 2px 4px;
    border-radius: 4px;
    font-family: monospace;
}
</style>
{% endblock %}
